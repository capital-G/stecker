{% extends "base.html.jinja" %}

{% block content %}

<div x-data="{
        returnRoomPrefix: new URLSearchParams(location.search).get('returnRoomPrefix'),
        addRandomPostfix: parseInt(new URLSearchParams(location.search).get('addRandomPostfix')) >= 1,
        volume: 80,
        borderColor() {return $store.stecker.isPlaying ? 'greenyellow' : 'orange'},
        clickedPlay: false,
    }
    "
    style="
    display:flex;
    flex-direction: column;
    align-items:center;
    height: 100vh;
    max-width:600px;
    margin:auto;
">
{% if room_name %}
    <div style="flex-grow: 0.7;">
        <h1 style="
        font-size:3rem;
        padding: 3rem;
        font-weight:bold;
        margin:0;
    ">{{ room_name }}</h1>
    </div>

    <div style="
        display: flex;
        flex-direction: column;
        align-items: center;
    ">
        <button
            @click="$store.stecker.joinRoom('{{ room_name }}', 'AUDIO', returnRoomPrefix, addRandomPostfix); clickedPlay=true;"
            :style="{border: '4px solid ' + borderColor()}"
            :disabled="clickedPlay"
            style="
                padding:2rem 4rem;
                font-size:1.5rem;
                font-weight:bold;
                cursor:pointer;"
            >â–¶</button>

        <audio id="audio-player" controls="controls" style="visibility: hidden;"></audio>

        <input type="range" min="0" max="100" value="80"
            x-model="volume"
            oninput="document.getElementById('audio-player').volume = this.value / 100"
            style="
                width:100%;
                margin-top:1rem;"
        >
    </div>
{% else %}
    <div style="flex-grow: 0.3;">
        <h1 style="
        font-size:3rem;
        padding: 3rem;
        font-weight:bold;
        margin:0;
    ">Room not available</h1>
    </div>
{% endif %}

</div>

{% endblock %}
